<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>dockerfile</title>
      <link href="/2023/06/17/dockerfile/"/>
      <url>/2023/06/17/dockerfile/</url>
      
        <content type="html"><![CDATA[<h2 id="1-docker镜像构建"><a href="#1-docker镜像构建" class="headerlink" title="1. docker镜像构建"></a>1. docker镜像构建</h2><h3 id="1-Dockerfile"><a href="#1-Dockerfile" class="headerlink" title="1. Dockerfile"></a>1. Dockerfile</h3><p>Dockerfile也可以写成dockerfile，一般写成Dockerfile，用于构建docker镜像</p><h3 id="2-Dockerfile文件编写"><a href="#2-Dockerfile文件编写" class="headerlink" title="2.Dockerfile文件编写"></a>2.Dockerfile文件编写</h3><p> docker文件中的命令大小写都可以，一般大写</p><p> docker文件的一条命令占一行</p><ul><li>FROM</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建镜像的基础，from必须在其他命令前面</span></span><br><span class="line"><span class="comment"># 可以写多条该命令</span></span><br><span class="line"><span class="keyword">FROM</span> xxx</span><br></pre></td></tr></table></figure><ul><li>RUN</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建镜像运行的命令</span></span><br><span class="line"><span class="comment"># 可以写多条</span></span><br><span class="line"><span class="comment"># 有多种写的格式，例如执行python app.py这个命令，有一下几种方式</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> [<span class="string">&quot;python&quot;</span>, <span class="string">&quot;app.py&quot;</span>]</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;Hello, Docker!&quot;</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> python app.py</span></span><br></pre></td></tr></table></figure><ul><li>CMD</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在启动命令的时候执行</span></span><br><span class="line"><span class="comment"># 只能有一条，如果有多条，只执行最后一条</span></span><br><span class="line"><span class="comment"># 有多种写的格式，例如执行python app.py这个命令，有一下几种方式</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;python&quot;</span>, <span class="string">&quot;app.py&quot;</span>]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;Hello, Docker!&quot;</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> python app.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只有 docker run 容器名称 这个种方式才能出发CMD，如果启动名称后面有其他参数就会覆盖掉CMD的默认命令</span></span><br></pre></td></tr></table></figure><ul><li>COPY</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从宿主机复制文件到docker镜像中</span></span><br><span class="line"><span class="comment"># 可以写多条</span></span><br><span class="line"><span class="comment"># 宿主机路径可以写绝对路径，也可以写相对路径，相对路径以dockerfile文件所在路径为基础</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> 宿主机文件路径 镜像文件路径</span></span><br></pre></td></tr></table></figure><ul><li>ADD</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ADD</span><span class="language-bash"> 宿主机文件路径 镜像文件路径</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> 文件的url地址 镜像文件路径</span></span><br></pre></td></tr></table></figure><ul><li><p>ADD和COPY的区别</p><ul><li><p><code>COPY</code> 命令只能复制主机上的本地文件或目录到镜像中。</p></li><li><p><code>ADD</code> 命令不仅可以复制主机上的本地文件或目录，还可以复制远程文件或 URL 到镜像中。如果目标路径是一个 URL，Docker 将尝试自动下载并复制文件到镜像中。</p></li><li><p><code>COPY</code> 命令在复制过程中不会自动解压缩文件</p></li><li><p><code>ADD</code> 命令在复制过程中如果遇到压缩文件（例如 <code>.tar</code>, <code>.tar.gz</code>, <code>.tgz</code>, <code>.zip</code>），它会自动解压缩文件并将其复制到镜像中</p></li></ul></li><li><p>ENV</p></li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置环境变量，可以通过$变量 获取值</span></span><br><span class="line"><span class="comment"># 可以设置多条</span></span><br><span class="line"><span class="keyword">ENV</span> 变量=赋值</span><br></pre></td></tr></table></figure><ul><li>EXPOSE</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 展示镜像的端口号信息</span></span><br><span class="line"><span class="comment"># EXPOSR 80 443 3306</span></span><br><span class="line"><span class="comment"># 在创建容器时需要根据-p参数和宿主机绑定</span></span><br><span class="line"><span class="comment"># 并不会真正打开容器的端口，只是提示信息，可以让使用者看到容器的端口情况</span></span><br><span class="line">EXPOSR 端口 端口 端口</span><br></pre></td></tr></table></figure><ul><li>WORKDIR</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置镜像的工作目录</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> 目录</span></span><br></pre></td></tr></table></figure><ul><li>VOLUME</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 展示镜像可挂载点信息</span></span><br><span class="line"><span class="comment"># VOLUME /home/data1 /home/data2s</span></span><br><span class="line"><span class="comment"># 在运行容器时需要和宿主机通过-v参数绑定</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> 路径 路径 路径</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>纪锐鑫</title>
      <link href="/2023/06/14/first/"/>
      <url>/2023/06/14/first/</url>
      
        <content type="html"><![CDATA[<h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><h3 id="创建一个博客"><a href="#创建一个博客" class="headerlink" title="创建一个博客"></a>创建一个博客</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="打包项目"><a href="#打包项目" class="headerlink" title="打包项目"></a>打包项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello Hexo</title>
      <link href="/2023/06/13/hello-world/"/>
      <url>/2023/06/13/hello-world/</url>
      
        <content type="html"><![CDATA[<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
